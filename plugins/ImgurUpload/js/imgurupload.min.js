!function(e){"use strict";var i=[],n=function(e,i){var n,t,a;i+="\n",document.selection?(e.focus(),n=document.selection.createRange(),n.text=i):e.selectionStart||"0"==e.selectionStart?(t=e.selectionStart,a=e.selectionEnd,e.value=e.value.substring(0,t)+i+e.value.substring(a,e.value.length)):e.value+=i},t=function(i){var n,t,a=i.link.replace(/^http:/i,"https:"),o="1"===gdn.definition("resizeimages")&&1===gdn.definition("imgurthumbnailsuffix").length,r=e("#Form_Format").val();switch(o&&(t=a.split("."),t[t.length-2]+=gdn.definition("imgurthumbnailsuffix"),t=t.join(".")),r.toLowerCase()){case"bbcode":n=o?"[url="+a+"][img]"+t+"[/img][/url]":"[img]"+a+"[/img]";break;case"markdown":n=o?"[![]("+t+")]("+a+")":"![]("+a+")";break;case"html":n=o?'<a href="'+a+'" target="_new"><img src="'+t+'" alt="" /></a>':'<img src="'+a+'" alt="" width="'+i.width+'" height="'+i.height+'" />';break;default:n=a}return n},a=function(e,i,a){var o=10;return{init:function(){this.on("error",function(e,i){i.indexOf("File is too big")>-1&&(i="File <strong>"+e.name+"</strong> is too large at "+Math.round(e.size/1024/1024*100)/100+"MB. Max filesize is "+o+"MB."),gdn.informError(i),this.removeFile(e)})},sending:function(){e.prop("disabled",!0)},queuecomplete:function(){e.prop("disabled",!1)},success:function(i,a){a.success?n(e[0],t(a.data)):gdn.informError("Something went wrong while uploading your images. Our image host, imgur.com, may be having technical issues. Please try again in a few minutes.")},autoQueue:!0,acceptedFiles:"image/*",paramName:"image",clickable:a,method:"post",maxFilesize:o,maxFiles:20,previewsContainer:i[0],thumbnailWidth:60,thumbnailHeight:60,fallback:function(){},url:"https://api.imgur.com/3/upload",headers:{Authorization:"Client-ID "+gdn.definition("imgurclientid"),Accept:"application/json"}}},o=function(o){var r,s=o.parents("form"),l=s.find(".bodybox-wrap"),u=l.find(".imgur-help-text"),d=-1,c=s.find("[type=submit]").last(),g=e("<div/>",{class:"imguruploader-preview-ctx"});o.length&&(o.after(g),l.length&&!u.length&&e("<div/>",{class:"imgur-help-text",text:"You can drag and drop images into the comment box."}).appendTo(l),"1"===gdn.definition("enabledragdrop")&&(i.push(new Dropzone(o[0],a(o,g,!1))),d=i.length-1),("ontouchstart"in window||"1"===gdn.definition("showimagesbtn"))&&(r=e('<a href="#" class="Button ButtonAddImages">Add Images</a>').on("click",function(e){e.preventDefault()}),c.before(r),i.push(new Dropzone(r[0],a(o,g,!0)))),c.on("click",function(){g.empty()}),d>-1&&o.on("paste",function(e){var n,t=e.originalEvent.clipboardData.items;for(n=0;n<t.length;n++)"file"===t[n].kind&&t[n].type.indexOf("image/")>-1&&i[d].addFile(t[n].getAsFile())}),"1"===gdn.definition("processimageurls")&&o.on("drop",function(e){var i=e.originalEvent.dataTransfer.getData("URL");i.length&&(e.preventDefault(),e.stopPropagation(),i.match(/([a-z\-_0-9\/\:\.]*\.(jpg|jpeg|png|gif))/i)?n(o[0],t({link:i})):n(o[0],i))}))};e(function(){var i=e("#Form_Body");o(i),e(document).on("EditCommentFormLoaded",function(i,n){n.find(".EditCommentForm").find("textarea").each(function(){o(e(this))})})})}(jQuery);
//# sourceMappingURL=imgurupload.js.map